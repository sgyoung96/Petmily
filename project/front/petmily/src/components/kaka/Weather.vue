<template>
  <div>
    <div v-for="item in items" :key="item.base_date">
      <div>
        <span v-if="item.category === 'TMP'"><br />{{ item.fcstTime }}ì‹œ ì˜ˆë³´<br /> ê¸°ì˜¨: {{ item.fcstValue }}ë„
          <span v-if="item.fcstValue <= '18'">ì–‘í˜¸ğŸ¾</span>
          <span v-else-if="item.fcstValue <= '21'">ì¡°ê¸ˆ ì£¼ì˜ğŸ’¦</span>
          <span v-else-if="item.fcstValue >= '26' && item.fcstValue < '32'">ì£¼ì˜ğŸš¨</span>
          <span v-else-if="item.fcstValue >= '29' && item.fcstValue < '32'">ìœ„í—˜ğŸ”¥</span>
          <span v-else-if="item.fcstValue >= '32'">ë§¤ìš°ìœ„í—˜ğŸš·</span>
        </span>
        <span v-else-if="item.category === 'SKY'">
          ë‚ ì”¨:
          <span v-if="item.fcstValue === '1'">ğŸŒ</span>
          <span v-else-if="item.fcstValue === '3'">â›…</span>
          <span v-else-if="item.fcstValue === '4'">â˜</span>
        </span>
        <span v-else-if="item.category === 'PCP'">ê°•ìˆ˜ëŸ‰: {{ item.fcstValue }}</span>
      </div>
    </div>
  </div>
  <table class="table" v-if="items.length">
  <thead>
    <tr>
      <th scope="col">#{{ this.date }}ì¼ì ì‚°ì±…</th>
      <th scope="col" v-if="items.length">{{ items[0].fcstTime }}ì‹œ</th>
      <th scope="col" v-if="items.length">{{ items[12].fcstTime }}ì‹œ</th>
      <th scope="col" v-if="items.length">{{ items[24].fcstTime }}ì‹œ</th>
      <th scope="col" v-if="items.length">{{ items[36].fcstTime }}ì‹œ</th>
      <th scope="col" v-if="items.length">{{ items[48].fcstTime }}ì‹œ</th>
    </tr>
  </thead>
  <tbody v-if="items.length">
    <tr>
      <th scope="row">ê¸°ì˜¨</th>
      <td>{{ items[0].fcstValue }}â„ƒ</td>
      <td>{{ items[12].fcstValue }}â„ƒ</td>
      <td>{{ items[24].fcstValue }}â„ƒ</td>
      <td>{{ items[36].fcstValue }}â„ƒ</td>
      <td>{{ items[48].fcstValue }}â„ƒ</td>
    </tr>
    <tr>
      <th scope="row">ë‚ ì”¨</th>
      <td v-if="items.length">
        <span v-if="items[9].fcstValue != 'ê°•ìˆ˜ì—†ìŒ'">â˜”</span>
        <span v-else>
          <span v-if="items[5].fcstValue === '1'">ğŸŒ</span>
          <span v-else-if="items[5].fcstValue === '3'">â›…</span>
          <span v-else-if="items[5].fcstValue === '4'">â˜</span>
        </span>
      </td>
      <td v-if="items.length">
        <span v-if="items[21].fcstValue != 'ê°•ìˆ˜ì—†ìŒ'">â˜”</span>
        <span v-else>
          <span v-if="items[17].fcstValue === '1'">ğŸŒ</span>
          <span v-else-if="items[17].fcstValue === '3'">â›…</span>
          <span v-else-if="items[17].fcstValue === '4'">â˜</span>
        </span>
      </td>
      <td v-if="items.length">
        <span v-if="items[33].fcstValue != 'ê°•ìˆ˜ì—†ìŒ'">â˜”</span>
        <span v-else>
          <span v-if="items[29].fcstValue === '1'">ğŸŒ</span>
          <span v-else-if="items[29].fcstValue === '3'">â›…</span>
          <span v-else-if="items[29].fcstValue === '4'">â˜</span>
        </span>
      </td>
      <td v-if="items.length">
        <span v-if="items[45].fcstValue != 'ê°•ìˆ˜ì—†ìŒ'">â˜”</span>
        <span v-else>
          <span v-if="items[41].fcstValue === '1'">ğŸŒ</span>
          <span v-else-if="items[41].fcstValue === '3'">â›…</span>
          <span v-else-if="items[41].fcstValue === '4'">â˜</span>
        </span>
      </td>
      <td v-if="items.length">
        <span v-if="items[45].fcstValue != 'ê°•ìˆ˜ì—†ìŒ'">â˜”</span>
        <span v-else>
          <span v-if="items[41].fcstValue === '1'">ğŸŒ</span>
          <span v-else-if="items[41].fcstValue === '3'">â›…</span>
          <span v-else-if="items[41].fcstValue === '4'">â˜</span>
        </span>
      </td>
    </tr>
    <tr>
      <th scope="row">ê°•ìˆ˜ëŸ‰</th>
      <td v-if="items.length">{{ items[9].fcstValue }}</td>
      <td v-if="items.length">{{ items[21].fcstValue }}</td>
      <td v-if="items.length">{{ items[33].fcstValue }}</td>
      <td v-if="items.length">{{ items[45].fcstValue }}</td>
      <td v-if="items.length">{{ items[45].fcstValue }}</td>
    </tr>
    <tr>
      <th scope="row">ê°±ì–¼ì¥ ì‚°ì±…</th>
      <td>
        <span v-if="items[0].fcstValue <= '18'">ì–‘í˜¸ğŸ¾</span>
        <span v-else-if="items[0].fcstValue >= '21' && items[0].fcstValue < '26'">ì•½ê°„ì£¼ì˜ğŸ’¦</span>
        <span v-else-if="items[0].fcstValue >= '26' && items[0].fcstValue < '29'">ì£¼ì˜ğŸš¨</span>
        <span v-else-if="items[0].fcstValue >= '29' && items[0].fcstValue < '32'">ìœ„í—˜ğŸ”¥</span>
        <span v-else-if="items[0].fcstValue >= '32'">ë§¤ìš°ìœ„í—˜ğŸš·</span>
      </td>
      <td>
        <span v-if="items[12].fcstValue <= '18'">ì–‘í˜¸ğŸ¾</span>
        <span v-else-if="items[12].fcstValue >= '21' && items[12].fcstValue < '26'">ì•½ê°„ì£¼ì˜ğŸ’¦</span>
        <span v-else-if="items[12].fcstValue >= '26' && items[12].fcstValue < '29'">ì£¼ì˜ğŸš¨</span>
        <span v-else-if="items[12].fcstValue >= '29' && items[12].fcstValue < '32'">ìœ„í—˜ğŸ”¥</span>
        <span v-else-if="items[12].fcstValue >= '32'">ë§¤ìš°ìœ„í—˜ğŸš·</span>
      </td>
      <td>
        <span v-if="items[24].fcstValue <= '18'">ì–‘í˜¸ğŸ¾</span>
        <span v-else-if="items[24].fcstValue >= '21' && items[48].fcstValue < '26'">ì•½ê°„ì£¼ì˜ğŸ’¦</span>
        <span v-else-if="items[24].fcstValue >= '26' && items[24].fcstValue < '29'">ì£¼ì˜ğŸš¨</span>
        <span v-else-if="items[24].fcstValue >= '29' && items[24].fcstValue < '32'">ìœ„í—˜ğŸ”¥</span>
        <span v-else-if="items[24].fcstValue >= '32'">ë§¤ìš°ìœ„í—˜ğŸš·</span>
      </td>
      <td>
        <span v-if="items[36].fcstValue <= '18'">ì–‘í˜¸ğŸ¾</span>
        <span v-else-if="items[36].fcstValue >= '21' && items[36].fcstValue < '26'">ì•½ê°„ì£¼ì˜ğŸ’¦</span>
        <span v-else-if="items[36].fcstValue >= '26' && items[36].fcstValue < '29'">ì£¼ì˜ğŸš¨</span>
        <span v-else-if="items[36].fcstValue >= '29' && items[36].fcstValue < '32'">ìœ„í—˜ğŸ”¥</span>
        <span v-else-if="items[36].fcstValue >= '32'">ë§¤ìš°ìœ„í—˜ğŸš·</span>
      </td>
      <td>
        <span v-if="items[48].fcstValue <= '18'">ì–‘í˜¸ğŸ¾</span>
        <span v-else-if="items[48].fcstValue >= '21' && items[48].fcstValue < '26'">ì•½ê°„ì£¼ì˜ğŸ’¦</span>
        <span v-else-if="items[48].fcstValue >= '26' && items[48].fcstValue < '29'">ì£¼ì˜ğŸš¨</span>
        <span v-else-if="items[48].fcstValue >= '29' && items[48].fcstValue < '32'">ìœ„í—˜ğŸ”¥</span>
        <span v-else-if="items[48].fcstValue >= '32'">ë§¤ìš°ìœ„í—˜ğŸš·</span>
      </td>
    </tr>
  </tbody>
  <tbody v-else>
    <tr>
      <td colspan="6">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td>
    </tr>
  </tbody>
</table>

</template>
  
<script>

export default {
  name: 'App',
  data() {
    return {
      items: [],
      datetime: new Date(),
      date: this.formatDate(new Date()),
      time: ''
    };
  },
  created() {
    if (8 <= this.datetime.getHours() && this.datetime.getHours() <= 9) {
      this.time = '0800';
    } else if (9 <= this.datetime.getHours() && this.datetime.getHours() < 10) {
      this.time = '0800';
    } else if (10 <= this.datetime.getHours() && this.datetime.getHours() < 11) {
      this.time = '0800';
    } else if (11 <= this.datetime.getHours() && this.datetime.getHours() < 12) {
      this.time = '0800';
    } else if (12 <= this.datetime.getHours() && this.datetime.getHours() < 13) {
      this.time = '0800';
    } else if (13 <= this.datetime.getHours() && this.datetime.getHours() < 14) {
      this.time = '0800';
    } else if (14 <= this.datetime.getHours() && this.datetime.getHours() < 15) {
      this.time = '1400';
    } else if (15 <= this.datetime.getHours() && this.datetime.getHours() < 16) {
      this.time = '1400';
    } else if (16 <= this.datetime.getHours() && this.datetime.getHours() < 17) {
      this.time = '1400';
    } else {
      this.time = '2000';
    }

    this.fetchData(); // í˜ì´ì§€ê°€ ìƒì„±ë  ë•Œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
  },
  methods: {
    fetchData() {


      console.log(this.time);
      console.log(this.date);
      const self = this;
      self.$axios.get(`https://apis.data.go.kr/1360000/VilageFcstInfoService_2.0/getVilageFcst?dataType=json&serviceKey=hqbUzbZx%2BbQR6OgVCNvZDXGGWIVTWAIawDhN2Y9fbW6Pndu%2BrU9e1NaR9UpW7%2BPotKdwoD9cXlkHbSS7tzFRJQ%3D%3D&numOfRows=50&pageNo=1&base_date=${self.date}&base_time=${self.time}&nx=62&ny=122`)
        .then(function (res) {
          if (res.status == 200) {
            const data = res.data.response.body
            self.items = data.items.item;
          } else {
            alert(res.status)
          }
        })
    },
    handleItemClick(addr, name) {
      this.addr = addr;
      this.name = name;
      this.$router.push({ name: 'AnimalHospital', params: { addr: this.addr, name: this.name } });
    },
    formatDate(date) {
      const options = {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit'
      };

      return new Date(date).toLocaleString('ko-KR', options).replace(/\D/g, '');
    },
    formatDate2(date) {
      const options = {
        hour: '2-digit',
        minute: '2-digit'
      };

      return new Date(date).toLocaleString('ko-KR', options).replace(/\D/g, '');
    }

  },


};
</script>
  
  
<style></style>